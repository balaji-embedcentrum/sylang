<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Test</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
</head>
<body>
    <h1>Mermaid Test</h1>
    
    <h2>Direct Mermaid (should work)</h2>
    <div class="mermaid">
        graph TB
            A[System Requirements] --> B[Functional Architecture]
            B --> C[Physical Architecture]
    </div>
    
    <h2>Code Block (what we need to convert)</h2>
    <pre class="code-block" data-language="mermaid">
        <code class="language-mermaid">graph TB
    A[System Requirements] --> B[Functional Architecture]
    B --> C[Physical Architecture]</code>
    </pre>
    
    <h2>Converted Diagram</h2>
    <div id="converted"></div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base'
        });
        
        // Test conversion
        const codeBlock = document.querySelector('.code-block[data-language="mermaid"] code');
        if (codeBlock) {
            const graphDefinition = codeBlock.textContent.trim();
            console.log('Graph definition:', graphDefinition);
            
            const mermaidDiv = document.createElement('div');
            mermaidDiv.className = 'mermaid';
            
            document.getElementById('converted').appendChild(mermaidDiv);
            
            mermaid.render('test-diagram', graphDefinition).then(result => {
                mermaidDiv.innerHTML = result.svg;
                console.log('Successfully rendered test diagram');
            }).catch(error => {
                console.error('Error:', error);
                mermaidDiv.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
            });
        }
    </script>
</body>
</html> 